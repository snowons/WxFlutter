{"version":3,"file":"index.js","sources":["../../runtime/bridge/CallbackManager.js","../../runtime/shared/utils.js","../../runtime/vdom/operation.js","../../runtime/vdom/Node.js","../../runtime/vdom/WeexElement.js","../../runtime/vdom/Element.js","../../runtime/bridge/normalize.js","../../runtime/bridge/TaskCenter.js","../../runtime/bridge/receiver.js","../../runtime/api/module.js","../../runtime/api/component.js","../../runtime/api/service.js","../../runtime/vdom/Comment.js","../../runtime/bridge/Listener.js","../../runtime/bridge/Handler.js","../../runtime/vdom/Document.js","../../runtime/api/WeexInstance.js","../../runtime/api/init.js","../../runtime/vdom/index.js","../../runtime/api/config.js","../../runtime/api/index.js"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nfunction getHookKey (componentId, type, hookName) {\n  return `${type}@${hookName}#${componentId}`\n}\n\n/**\n * For general callback management of a certain Weex instance.\n * Because function can not passed into native, so we create callback\n * callback id for each function and pass the callback id into native\n * in fact. And when a callback called from native, we can find the real\n * callback through the callback id we have passed before.\n */\nexport default class CallbackManager {\n  constructor (instanceId) {\n    this.instanceId = String(instanceId)\n    this.lastCallbackId = 0\n    this.callbacks = {}\n    this.hooks = {}\n  }\n  add (callback) {\n    this.lastCallbackId++\n    this.callbacks[this.lastCallbackId] = callback\n    return this.lastCallbackId\n  }\n  remove (callbackId) {\n    const callback = this.callbacks[callbackId]\n    delete this.callbacks[callbackId]\n    return callback\n  }\n  registerHook (componentId, type, hookName, hookFunction) {\n    // TODO: validate arguments\n    const key = getHookKey(componentId, type, hookName)\n    if (this.hooks[key]) {\n      console.warn(`[JS Framework] Override an existing component hook \"${key}\".`)\n    }\n    this.hooks[key] = hookFunction\n  }\n  triggerHook (componentId, type, hookName, args) {\n    // TODO: validate arguments\n    const key = getHookKey(componentId, type, hookName)\n    const hookFunction = this.hooks[key]\n    if (typeof hookFunction !== 'function') {\n      console.error(`[JS Framework] Invalid hook function type (${typeof hookFunction}) on \"${key}\".`)\n      return null\n    }\n    let result = null\n    try {\n      result = hookFunction.apply(null, args || [])\n    }\n    catch (e) {\n      console.error(`[JS Framework] Failed to execute the hook function on \"${key}\".`)\n      throw e\n    }\n    return result\n  }\n  consume (callbackId, data, ifKeepAlive) {\n    const callback = this.callbacks[callbackId]\n    if (typeof ifKeepAlive === 'undefined' || ifKeepAlive === false) {\n      delete this.callbacks[callbackId]\n    }\n    if (typeof callback === 'function') {\n      try {\n        return callback.call(null, data)\n      }\n      catch (error) {\n        console.error(`[JS Framework] Failed to execute the callback function:\\n ${error.toString()}`)\n        throw error\n      }\n    }\n    return new Error(`invalid callback id \"${callbackId}\"`)\n  }\n  close () {\n    this.callbacks = {}\n    this.hooks = {}\n  }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * Get a unique id.\n */\nlet nextNodeRef = 1\nexport function uniqueId () {\n  return (nextNodeRef++).toString()\n}\n\nexport function typof (v) {\n  const s = Object.prototype.toString.call(v)\n  return s.substring(8, s.length - 1)\n}\n\nexport function isPlainObject (value) {\n  return Object.prototype.toString.call(value) === '[object Object]'\n}\n\nexport function hasOwn (object, key) {\n  return isPlainObject(object) && Object.prototype.hasOwnProperty.call(object, key)\n}\n\nexport function bufferToBase64 (buffer) {\n  if (typeof btoa !== 'function') {\n    return ''\n  }\n  const string = Array.prototype.map.call(\n    new Uint8Array(buffer),\n    code => String.fromCharCode(code)\n  ).join('')\n  return btoa(string) // eslint-disable-line no-undef\n}\n\nexport function base64ToBuffer (base64) {\n  if (typeof atob !== 'function') {\n    return new ArrayBuffer(0)\n  }\n  const string = atob(base64) // eslint-disable-line no-undef\n  const array = new Uint8Array(string.length)\n  Array.prototype.forEach.call(string, (ch, i) => {\n    array[i] = ch.charCodeAt(0)\n  })\n  return array.buffer\n}\n\n/**\n * Detect if the param is falsy or empty\n * @param {any} any\n */\nexport function isEmpty (any) {\n  if (!any || typeof any !== 'object') {\n    return true\n  }\n\n  for (const key in any) {\n    if (Object.prototype.hasOwnProperty.call(any, key)) {\n      return false\n    }\n  }\n  return true\n}\n\nconst LEVELS = ['off', 'error', 'warn', 'info', 'log', 'debug']\nlet levelMap = {}\n\n/**\n * Generate map for which types of message will be sent in a certain message level\n * as the order of LEVELS.\n */\nexport function generateLevelMap () {\n  LEVELS.forEach(level => {\n    const levelIndex = LEVELS.indexOf(level)\n    levelMap[level] = {}\n    LEVELS.forEach(type => {\n      const typeIndex = LEVELS.indexOf(type)\n      if (typeIndex <= levelIndex) {\n        levelMap[level][type] = true\n      }\n    })\n  })\n}\n\n/**\n * Reset level map to empty object,\n * then the log level can be toggled at runtime.\n */\nexport function resetLevelMap () {\n  levelMap = {}\n}\n\n/**\n * Check if a certain type of message will be sent in current log level of env.\n * @param  {string} type\n * @return {boolean}\n */\nexport function checkLevel (type) {\n  const logLevel = (global.WXEnvironment && global.WXEnvironment.logLevel) || 'log'\n  return levelMap[logLevel] && levelMap[logLevel][type]\n}\n\n/**\n * Print debug log regardless of level check.\n *\n * This methods can avoid \"double level check\" compared with using wrapped console.debug\n */\nexport function debugLog (text) {\n  global.nativeLog('wxInteractionAnalyzer: [jsfm]' + text, '__DEBUG')\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nconst docMap = {}\n\n/**\n * Add a document object into docMap.\n * @param {string} id\n * @param {object} document\n */\nexport function addDoc (id, doc) {\n  if (id) {\n    docMap[id] = doc\n  }\n}\n\n/**\n * Get the document object by id.\n * @param {string} id\n */\nexport function getDoc (id) {\n  return docMap[id]\n}\n\n/**\n * Remove the document from docMap by id.\n * @param {string} id\n */\nexport function removeDoc (id) {\n  delete docMap[id]\n}\n\n/**\n * @deprecated\n * Get listener by document id.\n * @param {string} id\n * @return {object} listener\n */\nexport function getListener (id) {\n  const doc = docMap[id]\n  if (doc && doc.listener) {\n    return doc.listener\n  }\n  return null\n}\n\n/**\n * Get TaskCenter instance by id.\n * @param {string} id\n * @return {object} TaskCenter\n */\nexport function getTaskCenter (id) {\n  const doc = docMap[id]\n  if (doc && doc.taskCenter) {\n    return doc.taskCenter\n  }\n  return null\n}\n\n/**\n * Append body node to documentElement.\n * @param {object} document\n * @param {object} node\n * @param {object} before\n */\nexport function appendBody (doc, node, before) {\n  const { documentElement } = doc\n\n  if (documentElement.pureChildren.length > 0 || node.parentNode) {\n    return\n  }\n  const children = documentElement.children\n  const beforeIndex = children.indexOf(before)\n  if (beforeIndex < 0) {\n    children.push(node)\n  }\n  else {\n    children.splice(beforeIndex, 0, node)\n  }\n\n  if (node.nodeType === 1) {\n    if (node.role === 'body') {\n      node.docId = doc.id\n      node.ownerDocument = doc\n      node.parentNode = documentElement\n      linkParent(node, documentElement)\n    }\n    else {\n      node.children.forEach(child => {\n        child.parentNode = node\n      })\n      setBody(doc, node)\n      node.docId = doc.id\n      node.ownerDocument = doc\n      linkParent(node, documentElement)\n      delete doc.nodeMap[node.nodeId]\n    }\n    documentElement.pureChildren.push(node)\n    sendBody(doc, node)\n  }\n  else {\n    node.parentNode = documentElement\n    doc.nodeMap[node.ref] = node\n  }\n}\n\nfunction sendBody (doc, node) {\n  const body = node.toJSON()\n  if (doc && doc.taskCenter && typeof doc.taskCenter.send === 'function') {\n    doc.taskCenter.send('dom', { action: 'createBody' }, [body])\n  }\n}\n\n/**\n * Set up body node.\n * @param {object} document\n * @param {object} element\n */\nexport function setBody (doc, el) {\n  el.role = 'body'\n  el.depth = 1\n  delete doc.nodeMap[el.nodeId]\n  el.ref = '_root'\n  doc.nodeMap._root = el\n  doc.body = el\n}\n\n/**\n * Establish the connection between parent and child node.\n * @param {object} child node\n * @param {object} parent node\n */\nexport function linkParent (node, parent) {\n  node.parentNode = parent\n  if (parent.docId) {\n    node.docId = parent.docId\n    node.ownerDocument = parent.ownerDocument\n    node.ownerDocument.nodeMap[node.nodeId] = node\n    node.depth = parent.depth + 1\n  }\n  node.children.forEach(child => {\n    linkParent(child, node)\n  })\n}\n\n/**\n * Get the next sibling element.\n * @param {object} node\n */\nexport function nextElement (node) {\n  while (node) {\n    if (node.nodeType === 1) {\n      return node\n    }\n    node = node.nextSibling\n  }\n}\n\n/**\n * Get the previous sibling element.\n * @param {object} node\n */\nexport function previousElement (node) {\n  while (node) {\n    if (node.nodeType === 1) {\n      return node\n    }\n    node = node.previousSibling\n  }\n}\n\n/**\n * Insert a node into list at the specified index.\n * @param {object} target node\n * @param {array} list\n * @param {number} newIndex\n * @param {boolean} changeSibling\n * @return {number} newIndex\n */\nexport function insertIndex (target, list, newIndex, changeSibling) {\n  /* istanbul ignore next */\n  if (newIndex < 0) {\n    newIndex = 0\n  }\n  const before = list[newIndex - 1]\n  const after = list[newIndex]\n  list.splice(newIndex, 0, target)\n  if (changeSibling) {\n    before && (before.nextSibling = target)\n    target.previousSibling = before\n    target.nextSibling = after\n    after && (after.previousSibling = target)\n  }\n  return newIndex\n}\n\n/**\n * Move the node to a new index in list.\n * @param {object} target node\n * @param {array} list\n * @param {number} newIndex\n * @param {boolean} changeSibling\n * @return {number} newIndex\n */\nexport function moveIndex (target, list, newIndex, changeSibling) {\n  const index = list.indexOf(target)\n  /* istanbul ignore next */\n  if (index < 0) {\n    return -1\n  }\n  if (changeSibling) {\n    const before = list[index - 1]\n    const after = list[index + 1]\n    before && (before.nextSibling = after)\n    after && (after.previousSibling = before)\n  }\n  list.splice(index, 1)\n  let newIndexAfter = newIndex\n  if (index <= newIndex) {\n    newIndexAfter = newIndex - 1\n  }\n  const beforeNew = list[newIndexAfter - 1]\n  const afterNew = list[newIndexAfter]\n  list.splice(newIndexAfter, 0, target)\n  if (changeSibling) {\n    beforeNew && (beforeNew.nextSibling = target)\n    target.previousSibling = beforeNew\n    target.nextSibling = afterNew\n    afterNew && (afterNew.previousSibling = target)\n  }\n  if (index === newIndexAfter) {\n    return -1\n  }\n  return newIndex\n}\n\n/**\n * Remove the node from list.\n * @param {object} target node\n * @param {array} list\n * @param {boolean} changeSibling\n */\nexport function removeIndex (target, list, changeSibling) {\n  const index = list.indexOf(target)\n  /* istanbul ignore next */\n  if (index < 0) {\n    return\n  }\n  if (changeSibling) {\n    const before = list[index - 1]\n    const after = list[index + 1]\n    before && (before.nextSibling = after)\n    after && (after.previousSibling = before)\n  }\n  list.splice(index, 1)\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { uniqueId } from '../shared/utils'\nimport { getDoc } from './operation'\n\nexport default class Node {\n  constructor () {\n    this.nodeId = uniqueId()\n    this.ref = this.nodeId\n    this.children = []\n    this.pureChildren = []\n    this.parentNode = null\n    this.nextSibling = null\n    this.previousSibling = null\n  }\n\n  /**\n  * Destroy current node, and remove itself form nodeMap.\n  */\n  destroy () {\n    const doc = getDoc(this.docId)\n    if (doc) {\n      delete this.docId\n      delete doc.nodeMap[this.nodeId]\n    }\n    this.children.forEach(child => {\n      child.destroy()\n    })\n  }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { getTaskCenter } from './operation'\n\nlet Element\n\nexport function setElement (El) {\n  Element = El\n}\n\n/**\n * A map which stores all type of elements.\n * @type {Object}\n */\nconst registeredElements = {}\n\n/**\n * Register an extended element type with component methods.\n * @param  {string} type    component type\n * @param  {array}  methods a list of method names\n */\nexport function registerElement (type, methods) {\n  // Skip when no special component methods.\n  if (!Array.isArray(methods) || !methods.length) {\n    return\n  }\n\n  // Init constructor.\n  class WeexElement extends Element {}\n\n  // Add methods to prototype.\n  methods.forEach(methodName => {\n    WeexElement.prototype[methodName] = function (...args) {\n      const taskCenter = getTaskCenter(this.docId)\n      if (taskCenter) {\n        return taskCenter.send('component', {\n          ref: this.ref,\n          component: type,\n          method: methodName\n        }, args)\n      }\n    }\n  })\n\n  // Add to element type map.\n  registeredElements[type] = WeexElement\n}\n\nexport function unregisterElement (type) {\n  delete registeredElements[type]\n}\n\nexport function getWeexElement (type) {\n  return registeredElements[type]\n}\n\nexport function isWeexElement (type) {\n  return !!registeredElements[type]\n}\n\n/**\n * Clear all element types. Only for testing.\n */\nexport function clearWeexElements () {\n  for (const type in registeredElements) {\n    unregisterElement(type)\n  }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport Node from './Node'\nimport {\n  getDoc,\n  getTaskCenter,\n  linkParent,\n  nextElement,\n  previousElement,\n  insertIndex,\n  moveIndex,\n  removeIndex\n} from './operation'\nimport { uniqueId, isEmpty, checkLevel, debugLog } from '../shared/utils'\nimport { getWeexElement, setElement } from './WeexElement'\n\nconst DEFAULT_TAG_NAME = 'div'\nconst BUBBLE_EVENTS = [\n  'click', 'longpress', 'touchstart', 'touchmove', 'touchend',\n  'panstart', 'panmove', 'panend', 'horizontalpan', 'verticalpan', 'swipe'\n]\n\nfunction registerNode (docId, node) {\n  const doc = getDoc(docId)\n  doc.nodeMap[node.nodeId] = node\n}\n\nexport default class Element extends Node {\n  constructor (type = DEFAULT_TAG_NAME, props, isExtended) {\n    super()\n\n    const WeexElement = getWeexElement(type)\n    if (WeexElement && !isExtended) {\n      return new WeexElement(type, props, true)\n    }\n\n    props = props || {}\n    this.nodeType = 1\n    this.nodeId = uniqueId()\n    this.ref = this.nodeId\n    this.type = type\n    this.attr = props.attr || {}\n    this.style = props.style || {}\n    this.classStyle = props.classStyle || {}\n    this.event = {}\n    this.children = []\n    this.pureChildren = []\n  }\n\n  /**\n   * Append a child node.\n   * @param {object} node\n   * @return {undefined | number} the signal sent by native\n   */\n  appendChild (node) {\n    if (node.parentNode && node.parentNode !== this) {\n      return\n    }\n    /* istanbul ignore else */\n    if (!node.parentNode) {\n      if (checkLevel('debug')) {\n        debugLog(`[appendChild](${this.docId},${node.type},${node.ref}) `\n          + `Append <${node.type}> to <${this.type}> (${this.ref}).`)\n      }\n      linkParent(node, this)\n      insertIndex(node, this.children, this.children.length, true)\n      if (this.docId) {\n        registerNode(this.docId, node)\n      }\n      if (node.nodeType === 1) {\n        insertIndex(node, this.pureChildren, this.pureChildren.length)\n        const taskCenter = getTaskCenter(this.docId)\n        if (taskCenter) {\n          return taskCenter.send(\n            'dom',\n            { action: 'addElement' },\n            [this.ref, node.toJSON(), -1]\n          )\n        }\n      }\n    }\n    else {\n      if (checkLevel('debug')) {\n        debugLog(`[appendChild](${this.docId},${node.type},${node.ref}) `\n          + `Move <${node.type}> to ${this.children.length} of <${this.type}> (${this.ref}).`)\n      }\n      moveIndex(node, this.children, this.children.length, true)\n      if (node.nodeType === 1) {\n        const index = moveIndex(node, this.pureChildren, this.pureChildren.length)\n        const taskCenter = getTaskCenter(this.docId)\n        if (taskCenter && index >= 0) {\n          return taskCenter.send(\n            'dom',\n            { action: 'moveElement' },\n            [node.ref, this.ref, index]\n          )\n        }\n      }\n    }\n  }\n\n  /**\n   * Insert a node before specified node.\n   * @param {object} node\n   * @param {object} before\n   * @return {undefined | number} the signal sent by native\n   */\n  insertBefore (node, before) {\n    if (node.parentNode && node.parentNode !== this) {\n      return\n    }\n    if (node === before || (node.nextSibling && node.nextSibling === before)) {\n      return\n    }\n    if (!node.parentNode) {\n      if (checkLevel('debug')) {\n        debugLog(`[insertBefore](${this.docId},${node.type},${node.ref}) `\n          + `Insert <${node.type}> to <${this.type}> (${this.ref}), before (${before.ref}).`)\n      }\n      linkParent(node, this)\n      insertIndex(node, this.children, this.children.indexOf(before), true)\n      if (this.docId) {\n        registerNode(this.docId, node)\n      }\n      if (node.nodeType === 1) {\n        const pureBefore = nextElement(before)\n        const index = insertIndex(\n          node,\n          this.pureChildren,\n          pureBefore\n            ? this.pureChildren.indexOf(pureBefore)\n            : this.pureChildren.length\n        )\n        const taskCenter = getTaskCenter(this.docId)\n        if (taskCenter) {\n          return taskCenter.send(\n            'dom',\n            { action: 'addElement' },\n            [this.ref, node.toJSON(), index]\n          )\n        }\n      }\n    }\n    else {\n      moveIndex(node, this.children, this.children.indexOf(before), true)\n      if (node.nodeType === 1) {\n        const pureBefore = nextElement(before)\n        /* istanbul ignore next */\n        const index = moveIndex(\n          node,\n          this.pureChildren,\n          pureBefore\n            ? this.pureChildren.indexOf(pureBefore)\n            : this.pureChildren.length\n        )\n        const taskCenter = getTaskCenter(this.docId)\n        if (taskCenter && index >= 0) {\n          return taskCenter.send(\n            'dom',\n            { action: 'moveElement' },\n            [node.ref, this.ref, index]\n          )\n        }\n      }\n    }\n  }\n\n  /**\n   * Insert a node after specified node.\n   * @param {object} node\n   * @param {object} after\n   * @return {undefined | number} the signal sent by native\n   */\n  insertAfter (node, after) {\n    if (node.parentNode && node.parentNode !== this) {\n      return\n    }\n    if (node === after || (node.previousSibling && node.previousSibling === after)) {\n      return\n    }\n    if (!node.parentNode) {\n      if (checkLevel('debug')) {\n        debugLog(`[insertAfter](${this.docId},${node.type},${node.ref}) `\n          + `Insert <${node.type}> to <${this.type}> (${this.ref}), after (${after.ref}).`)\n      }\n      linkParent(node, this)\n      insertIndex(node, this.children, this.children.indexOf(after) + 1, true)\n      /* istanbul ignore else */\n      if (this.docId) {\n        registerNode(this.docId, node)\n      }\n      if (node.nodeType === 1) {\n        const index = insertIndex(\n          node,\n          this.pureChildren,\n          this.pureChildren.indexOf(previousElement(after)) + 1\n        )\n        const taskCenter = getTaskCenter(this.docId)\n        /* istanbul ignore else */\n        if (taskCenter) {\n          return taskCenter.send(\n            'dom',\n            { action: 'addElement' },\n            [this.ref, node.toJSON(), index]\n          )\n        }\n      }\n    }\n    else {\n      moveIndex(node, this.children, this.children.indexOf(after) + 1, true)\n      if (node.nodeType === 1) {\n        const index = moveIndex(\n          node,\n          this.pureChildren,\n          this.pureChildren.indexOf(previousElement(after)) + 1\n        )\n        const taskCenter = getTaskCenter(this.docId)\n        if (taskCenter && index >= 0) {\n          return taskCenter.send(\n            'dom',\n            { action: 'moveElement' },\n            [node.ref, this.ref, index]\n          )\n        }\n      }\n    }\n  }\n\n  /**\n   * Remove a child node, and decide whether it should be destroyed.\n   * @param {object} node\n   * @param {boolean} preserved\n   */\n  removeChild (node, preserved) {\n    if (node.parentNode) {\n      removeIndex(node, this.children, true)\n      if (node.nodeType === 1) {\n        if (checkLevel('debug')) {\n          debugLog(`[removeChild](${this.docId},${node.type},${node.ref}) `\n            + `Remove <${node.type}> from <${this.type}> (${this.ref}).`)\n        }\n        removeIndex(node, this.pureChildren)\n        const taskCenter = getTaskCenter(this.docId)\n        if (taskCenter) {\n          taskCenter.send(\n            'dom',\n            { action: 'removeElement' },\n            [node.ref]\n          )\n        }\n      }\n    }\n    if (!preserved) {\n      node.destroy()\n    }\n  }\n\n  /**\n   * Clear all child nodes.\n   */\n  clear () {\n    const taskCenter = getTaskCenter(this.docId)\n    /* istanbul ignore else */\n    if (taskCenter) {\n      this.pureChildren.forEach(node => {\n        taskCenter.send(\n          'dom',\n          { action: 'removeElement' },\n          [node.ref]\n        )\n      })\n    }\n    this.children.forEach(node => {\n      node.destroy()\n    })\n    this.children.length = 0\n    this.pureChildren.length = 0\n  }\n\n  /**\n   * Set an attribute, and decide whether the task should be send to native.\n   * @param {string} key\n   * @param {string | number} value\n   * @param {boolean} silent\n   */\n  setAttr (key, value, silent) {\n    if (this.attr[key] === value && silent !== false) {\n      return\n    }\n    this.attr[key] = value\n    const taskCenter = getTaskCenter(this.docId)\n    if (!silent && taskCenter) {\n      const result = {}\n      result[key] = value\n      taskCenter.send(\n        'dom',\n        { action: 'updateAttrs' },\n        [this.ref, result]\n      )\n    }\n  }\n\n  /**\n   * Set batched attributes.\n   * @param {object} batchedAttrs\n   * @param {boolean} silent\n   */\n  setAttrs (batchedAttrs, silent) {\n    if (isEmpty(batchedAttrs)) return\n    const mutations = {}\n    for (const key in batchedAttrs) {\n      if (this.attr[key] !== batchedAttrs[key]) {\n        this.attr[key] = batchedAttrs[key]\n        mutations[key] = batchedAttrs[key]\n      }\n    }\n    if (!isEmpty(mutations)) {\n      const taskCenter = getTaskCenter(this.docId)\n      if (!silent && taskCenter) {\n        taskCenter.send(\n          'dom',\n          { action: 'updateAttrs' },\n          [this.ref, mutations]\n        )\n      }\n    }\n  }\n\n  /**\n   * Set a style property, and decide whether the task should be send to native.\n   * @param {string} key\n   * @param {string | number} value\n   * @param {boolean} silent\n   */\n  setStyle (key, value, silent) {\n    if (this.style[key] === value && silent !== false) {\n      return\n    }\n    this.style[key] = value\n    const taskCenter = getTaskCenter(this.docId)\n    if (!silent && taskCenter) {\n      const result = {}\n      result[key] = value\n      taskCenter.send(\n        'dom',\n        { action: 'updateStyle' },\n        [this.ref, result]\n      )\n    }\n  }\n\n  /**\n   * Set batched style properties.\n   * @param {object} batchedStyles\n   * @param {boolean} silent\n   */\n  setStyles (batchedStyles, silent) {\n    if (isEmpty(batchedStyles)) return\n    const mutations = {}\n    for (const key in batchedStyles) {\n      if (this.style[key] !== batchedStyles[key]) {\n        this.style[key] = batchedStyles[key]\n        mutations[key] = batchedStyles[key]\n      }\n    }\n    if (!isEmpty(mutations)) {\n      const taskCenter = getTaskCenter(this.docId)\n      if (!silent && taskCenter) {\n        taskCenter.send(\n          'dom',\n          { action: 'updateStyle' },\n          [this.ref, mutations]\n        )\n      }\n    }\n  }\n\n  /**\n   * Set style properties from class.\n   * @param {object} classStyle\n   */\n  setClassStyle (classStyle) {\n    // reset previous class style to empty string\n    for (const key in this.classStyle) {\n      this.classStyle[key] = ''\n    }\n\n    Object.assign(this.classStyle, classStyle)\n    const taskCenter = getTaskCenter(this.docId)\n    if (taskCenter) {\n      taskCenter.send(\n        'dom',\n        { action: 'updateStyle' },\n        [this.ref, this.toStyle()]\n      )\n    }\n  }\n\n  /**\n   * Add an event handler.\n   * @param {string} event type\n   * @param {function} event handler\n   */\n  addEvent (type, handler, params) {\n    if (!this.event) {\n      this.event = {}\n    }\n    if (!this.event[type]) {\n      if (checkLevel('debug')) {\n        debugLog(`[addEvent](${this.docId},${this.type},${this.ref}) `\n          + `Add \"${type}\" event on <${this.type}> (${this.ref}).`)\n      }\n      this.event[type] = { handler, params }\n      const taskCenter = getTaskCenter(this.docId)\n      if (taskCenter) {\n        taskCenter.send(\n          'dom',\n          { action: 'addEvent' },\n          [this.ref, type]\n        )\n      }\n    }\n  }\n\n  /**\n   * Remove an event handler.\n   * @param {string} event type\n   */\n  removeEvent (type) {\n    if (this.event && this.event[type]) {\n      if (checkLevel('debug')) {\n        debugLog(`[removeEvent](${this.docId},${this.type},${this.ref}) `\n          + `Remove \"${type}\" event on <${this.type}> (${this.ref}).`)\n      }\n      delete this.event[type]\n      const taskCenter = getTaskCenter(this.docId)\n      if (taskCenter) {\n        taskCenter.send(\n          'dom',\n          { action: 'removeEvent' },\n          [this.ref, type]\n        )\n      }\n    }\n  }\n\n  /**\n   * Fire an event manually.\n   * @param {string} type type\n   * @param {function} event handler\n   * @param {boolean} isBubble whether or not event bubble\n   * @param {boolean} options\n   * @return {} anything returned by handler function\n   */\n  fireEvent (type, event, isBubble, options) {\n    let result = null\n    let isStopPropagation = false\n    const eventDesc = this.event[type]\n    if (eventDesc && event) {\n      if (checkLevel('debug')) {\n        debugLog(`[fireEvent](${this.docId},${this.type},${this.ref}) `\n          + `Fire \"${type}\" event on <${this.type}> (${this.ref}).`)\n      }\n      const handler = eventDesc.handler\n      event.stopPropagation = () => {\n        isStopPropagation = true\n      }\n      try {\n        if (options && options.params) {\n          result = handler.call(this, ...options.params, event)\n        }\n        else {\n          result = handler.call(this, event)\n        }\n      }\n      catch (error) {\n        console.error(`[JS Framework] Failed to invoke the event handler of \"${type}\" `\n          + `on ${this.type} (${this.ref}):\\n ${error.toString()}`)\n        throw error\n      }\n    }\n\n    if (!isStopPropagation\n      && isBubble\n      && (BUBBLE_EVENTS.indexOf(type) !== -1)\n      && this.parentNode\n      && this.parentNode.fireEvent) {\n      event.currentTarget = this.parentNode\n      this.parentNode.fireEvent(type, event, isBubble) // no options\n    }\n\n    return result\n  }\n\n  /**\n   * Get all styles of current element.\n   * @return {object} style\n   */\n  toStyle () {\n    return Object.assign({}, this.classStyle, this.style)\n  }\n\n  /**\n   * Convert current element to JSON like object.\n   * @param {boolean} ignoreChildren whether to ignore child nodes, default false\n   * @return {object} element\n   */\n  toJSON (ignoreChildren = false) {\n    const result = {\n      ref: this.ref.toString(),\n      type: this.type,\n      attr: this.attr,\n      style: this.toStyle()\n    }\n    const event = []\n    for (const type in this.event) {\n      const { params } = this.event[type]\n      if (!params) {\n        event.push(type)\n      }\n      else {\n        event.push({ type, params })\n      }\n    }\n    if (event.length) {\n      result.event = event\n    }\n    if (!ignoreChildren && this.pureChildren.length) {\n      result.children = this.pureChildren.map((child) => child.toJSON())\n    }\n    return result\n  }\n\n  /**\n   * Convert to HTML element tag string.\n   * @return {stirng} html\n   */\n  toString () {\n    return '<' + this.type +\n    ' attr=' + JSON.stringify(this.attr) +\n    ' style=' + JSON.stringify(this.toStyle()) + '>' +\n    this.pureChildren.map((child) => child.toString()).join('') +\n    '</' + this.type + '>'\n  }\n}\n\nsetElement(Element)\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { typof, bufferToBase64, base64ToBuffer } from '../shared/utils'\n\n/**\n * Normalize a primitive value.\n * @param  {any}        v\n * @return {primitive}\n */\nexport function normalizePrimitive (v) {\n  const type = typof(v)\n\n  switch (type) {\n    case 'Undefined':\n    case 'Null':\n      return ''\n\n    case 'RegExp':\n      return v.toString()\n    case 'Date':\n      return v.toISOString()\n\n    case 'Number':\n    case 'String':\n    case 'Boolean':\n    case 'Array':\n    case 'Object':\n      return v\n\n    case 'ArrayBuffer':\n      return {\n        '@type': 'binary',\n        dataType: type,\n        base64: bufferToBase64(v)\n      }\n\n    case 'Int8Array':\n    case 'Uint8Array':\n    case 'Uint8ClampedArray':\n    case 'Int16Array':\n    case 'Uint16Array':\n    case 'Int32Array':\n    case 'Uint32Array':\n    case 'Float32Array':\n    case 'Float64Array':\n      return {\n        '@type': 'binary',\n        dataType: type,\n        base64: bufferToBase64(v.buffer)\n      }\n\n    default:\n      return JSON.stringify(v)\n  }\n}\n\nexport function decodePrimitive (data) {\n  if (typof(data) === 'Object') {\n    // decode base64 into binary\n    if (data['@type'] && data['@type'] === 'binary') {\n      return base64ToBuffer(data.base64 || '')\n    }\n\n    const realData = {}\n    for (const key in data) {\n      realData[key] = decodePrimitive(data[key])\n    }\n    return realData\n  }\n  if (typof(data) === 'Array') {\n    return data.map(decodePrimitive)\n  }\n  return data\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport CallbackManager from './CallbackManager'\nimport Element from '../vdom/Element'\nimport { typof, checkLevel, debugLog } from '../shared/utils'\nimport { normalizePrimitive } from './normalize'\n\nlet fallback = function () {}\n\n// The API of TaskCenter would be re-design.\nexport class TaskCenter {\n  constructor (id, sendTasks) {\n    Object.defineProperty(this, 'instanceId', {\n      enumerable: true,\n      value: String(id)\n    })\n    Object.defineProperty(this, 'callbackManager', {\n      enumerable: true,\n      value: new CallbackManager(id)\n    })\n    fallback = sendTasks || function () {}\n  }\n\n  callback (callbackId, data, ifKeepAlive) {\n    return this.callbackManager.consume(callbackId, data, ifKeepAlive)\n  }\n\n  registerHook (...args) {\n    return this.callbackManager.registerHook(...args)\n  }\n\n  triggerHook (...args) {\n    return this.callbackManager.triggerHook(...args)\n  }\n\n  updateData (componentId, newData, callback) {\n    this.send('module', {\n      module: 'dom',\n      method: 'updateComponentData'\n    }, [componentId, newData, callback])\n  }\n\n  destroyCallback () {\n    return this.callbackManager.close()\n  }\n\n  /**\n   * Normalize a value. Specially, if the value is a function, then generate a function id\n   * and save it to `CallbackManager`, at last return the function id.\n   * @param  {any}        v\n   * @return {primitive}\n   */\n  normalize (v, deep = false) {\n    const type = typof(v)\n    if (v && v instanceof Element) {\n      return v.ref\n    }\n    if (v && v._isVue && v.$el instanceof Element) {\n      return v.$el.ref\n    }\n    if (type === 'Function') {\n      return this.callbackManager.add(v).toString()\n    }\n    if (deep) {\n      if (type === 'Object') {\n        const object = {}\n        for (const key in v) {\n          object[key] = this.normalize(v[key], true)\n        }\n        return object\n      }\n      if (type === 'Array') {\n        return v.map(item => this.normalize(item, true))\n      }\n    }\n    if (v && v.ref && v['[[VirtualElement]]']) {\n      return v.ref\n    }\n    return normalizePrimitive(v)\n  }\n\n  send (type, params, args, options) {\n    const { action, component, ref, module, method } = params\n\n    // normalize args and options\n    args = args.map(arg => this.normalize(arg))\n    if (typof(options) === 'Object') {\n      options = this.normalize(options, true)\n    }\n\n    switch (type) {\n      case 'dom': {\n        if (checkLevel('debug')) {\n          debugLog(`[task](${this.instanceId},${this.type},${action}) ${JSON.stringify(args)}`)\n        }\n        return this[action](this.instanceId, args)\n      }\n      case 'component':\n        return this.componentHandler(this.instanceId, ref, method, args, Object.assign({ component }, options))\n      default: {\n        if (checkLevel('debug')) {\n          debugLog(`[task](${this.instanceId},${module},${method}) ${JSON.stringify(args)}`)\n        }\n        return this.moduleHandler(this.instanceId, module, method, args, options)\n      }\n    }\n  }\n\n  callDOM (action, args) {\n    return this[action](this.instanceId, args)\n  }\n\n  callComponent (ref, method, args, options) {\n    return this.componentHandler(this.instanceId, ref, method, args, options)\n  }\n\n  callModule (module, method, args, options) {\n    return this.moduleHandler(this.instanceId, module, method, args, options)\n  }\n}\n\nexport function init () {\n  const DOM_METHODS = {\n    createFinish: global.callCreateFinish,\n    updateFinish: global.callUpdateFinish,\n    refreshFinish: global.callRefreshFinish,\n\n    createBody: global.callCreateBody,\n\n    addElement: global.callAddElement,\n    removeElement: global.callRemoveElement,\n    moveElement: global.callMoveElement,\n    updateAttrs: global.callUpdateAttrs,\n    updateStyle: global.callUpdateStyle,\n\n    addEvent: global.callAddEvent,\n    removeEvent: global.callRemoveEvent,\n    __updateComponentData: global.__updateComponentData\n  }\n  const proto = TaskCenter.prototype\n\n  for (const name in DOM_METHODS) {\n    const method = DOM_METHODS[name]\n    proto[name] = method ?\n      (id, args) => method(id, ...args) :\n      (id, args) => fallback(id, [{ module: 'dom', method: name, args }], '-1')\n  }\n\n  proto.componentHandler = global.callNativeComponent ||\n    ((id, ref, method, args, options) =>\n      fallback(id, [{ component: options.component, ref, method, args }]))\n\n  proto.moduleHandler = global.callNativeModule ||\n    ((id, module, method, args) =>\n      fallback(id, [{ module, method, args }]))\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { getDoc } from '../vdom/operation'\n\nfunction fireEvent (document, nodeId, type, event, domChanges, params) {\n  const el = document.getRef(nodeId)\n  if (el) {\n    return document.fireEvent(el, type, event, domChanges, params)\n  }\n  else if (event) {\n    event._nodeId = nodeId\n    return document.fireEvent(document.getRef('_documentElement'), type, event, domChanges, params)\n  }\n}\n\nfunction callback (document, callbackId, data, ifKeepAlive) {\n  return document.taskCenter.callback(callbackId, data, ifKeepAlive)\n}\n\nfunction componentHook (document, componentId, type, hook, args) {\n  if (!document || !document.taskCenter) {\n    console.error(`[JS Framework] Can't find \"document\" or \"taskCenter\".`)\n    return null\n  }\n  let result = null\n  try {\n    result = document.taskCenter.triggerHook(componentId, type, hook, args)\n  }\n  catch (e) {\n    console.error(`[JS Framework] Failed to trigger the \"${type}@${hook}\" hook on ${componentId}.`)\n\n    // Still throw the exception anyway, it should be caught\n    // and processed by the native for consistent error collecting.\n    throw e\n  }\n  return result\n}\n\n/**\n * Accept calls from native (event or callback).\n *\n * @param  {string} id\n * @param  {array} tasks list with `method` and `args`\n */\nexport function receiveTasks (id, tasks) {\n  const document = getDoc(id)\n  if (!document) {\n    return new Error(`[JS Framework] Failed to receiveTasks, `\n      + `instance (${id}) is not available.`)\n  }\n  if (Array.isArray(tasks)) {\n    return tasks.map(task => {\n      switch (task.method) {\n        case 'callback': return callback(document, ...task.args)\n        case 'fireEventSync':\n        case 'fireEvent': return fireEvent(document, ...task.args)\n        case 'componentHook': return componentHook(document, ...task.args)\n      }\n    })\n  }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { hasOwn, isPlainObject } from '../shared/utils'\n\nconst weexModules = {}\n\n/**\n * Register native modules information.\n * @param {object} newModules\n */\nexport function registerModules (newModules = {}) {\n  for (const name in newModules) {\n    if (!hasOwn(weexModules, name)) {\n      weexModules[name] = {}\n    }\n    if (Array.isArray(newModules[name])) {\n      newModules[name].forEach(method => {\n        if (typeof method === 'string') {\n          weexModules[name][method] = true\n        }\n        else if (isPlainObject(method) && typeof method.name === 'string') {\n          weexModules[name][method.name] = method.args || []\n        }\n      })\n    }\n  }\n}\n\n/**\n * Check whether the module or the method has been registered.\n * @param {String} module name\n * @param {String} method name (optional)\n */\nexport function isRegisteredModule (name, method) {\n  if (typeof method === 'string') {\n    return !!(weexModules[name] && weexModules[name][method])\n  }\n  return !!weexModules[name]\n}\n\nexport function getModuleDescription (name) {\n  return weexModules[name]\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { isPlainObject } from '../shared/utils'\nimport { registerElement } from '../vdom/WeexElement'\n\nconst weexComponents = {}\n\n/**\n * Register native components information.\n * @param {array} newComponents\n */\nexport function registerComponents(newComponents) {\n  if (Array.isArray(newComponents)) {\n    newComponents.forEach(component => {\n      if (!component) {\n        return\n      }\n      if (typeof component === 'string') {\n        weexComponents[component] = true\n      }\n      else if (isPlainObject(component) && typeof component.type === 'string') {\n        weexComponents[component.type] = component\n        registerElement(component.type, component.methods)\n      }\n    })\n  }\n  return 'wtf'\n}\n\n/**\n * Check whether the component has been registered.\n * @param {String} component name\n */\nexport function isRegisteredComponent(name) {\n  return !!weexComponents[name]\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n// JS Services\n\nexport const services = []\n\n/**\n * Register a JavaScript service.\n * A JavaScript service options could have a set of lifecycle methods\n * for each Weex instance. For example: create, refresh, destroy.\n * For the JS framework maintainer if you want to supply some features\n * which need to work well in different Weex instances, even in different\n * frameworks separately. You can make a JavaScript service to init\n * its variables or classes for each Weex instance when it's created\n * and recycle them when it's destroyed.\n * @param {object} options Could have { create, refresh, destroy }\n *                         lifecycle methods. In create method it should\n *                         return an object of what variables or classes\n *                         would be injected into the Weex instance.\n */\nexport function register (name, options) {\n  if (has(name)) {\n    console.warn(`Service \"${name}\" has been registered already!`)\n  }\n  else {\n    options = Object.assign({}, options)\n    services.push({ name, options })\n  }\n}\n\n/**\n * Unregister a JavaScript service by name\n * @param {string} name\n */\nexport function unregister (name) {\n  services.some((service, index) => {\n    if (service.name === name) {\n      services.splice(index, 1)\n      return true\n    }\n  })\n}\n\n/**\n * Check if a JavaScript service with a certain name existed.\n * @param  {string}  name\n * @return {Boolean}\n */\nexport function has (name) {\n  return indexOf(name) >= 0\n}\n\n/**\n * Find the index of a JavaScript service by name\n * @param  {string} name\n * @return {number}\n */\nfunction indexOf (name) {\n  return services.map(service => service.name).indexOf(name)\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport Node from './Node'\nimport { uniqueId } from '../shared/utils'\n\nexport default class Comment extends Node {\n  constructor (value) {\n    super()\n\n    this.nodeType = 8\n    this.nodeId = uniqueId()\n    this.ref = this.nodeId\n    this.type = 'comment'\n    this.value = value\n    this.children = []\n    this.pureChildren = []\n  }\n\n  /**\n  * Convert to HTML comment string.\n  * @return {stirng} html\n  */\n  toString () {\n    return '<!-- ' + this.value + ' -->'\n  }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n* Create the action object.\n* @param {string} name\n* @param {array} arguments\n* @return {object} action\n*/\nfunction createAction (name, args = []) {\n  return { module: 'dom', method: name, args: args }\n}\n\nexport default class Listener {\n  constructor (id, handler) {\n    this.id = id\n    this.batched = false\n    this.updates = []\n    if (typeof handler === 'function') {\n      Object.defineProperty(this, 'handler', {\n        configurable: true,\n        enumerable: true,\n        writable: true,\n        value: handler\n      })\n    }\n    else {\n      console.error('[JS Runtime] invalid parameter, handler must be a function')\n    }\n  }\n\n  /**\n   * Send the \"createFinish\" signal.\n   * @param {function} callback\n   * @return {undefined | number} the signal sent by native\n   */\n  createFinish (callback) {\n    const handler = this.handler\n    return handler([createAction('createFinish')], callback)\n  }\n\n  /**\n   * Send the \"updateFinish\" signal.\n   * @param {function} callback\n   * @return {undefined | number} the signal sent by native\n   */\n  updateFinish (callback) {\n    const handler = this.handler\n    return handler([createAction('updateFinish')], callback)\n  }\n\n  /**\n   * Send the \"refreshFinish\" signal.\n   * @param {function} callback\n   * @return {undefined | number} the signal sent by native\n   */\n  refreshFinish (callback) {\n    const handler = this.handler\n    return handler([createAction('refreshFinish')], callback)\n  }\n\n  /**\n   * Send the \"createBody\" signal.\n   * @param {object} element\n   * @return {undefined | number} the signal sent by native\n   */\n  createBody (element) {\n    const body = element.toJSON()\n    const children = body.children\n    delete body.children\n    const actions = [createAction('createBody', [body])]\n    if (children) {\n      actions.push.apply(actions, children.map(child => {\n        return createAction('addElement', [body.ref, child, -1])\n      }))\n    }\n    return this.addActions(actions)\n  }\n\n  /**\n   * Send the \"addElement\" signal.\n   * @param {object} element\n   * @param {stirng} reference id\n   * @param {number} index\n   * @return {undefined | number} the signal sent by native\n   */\n  addElement (element, ref, index) {\n    if (!(index >= 0)) {\n      index = -1\n    }\n    return this.addActions(createAction('addElement', [ref, element.toJSON(), index]))\n  }\n\n  /**\n   * Send the \"removeElement\" signal.\n   * @param {stirng} reference id\n   * @return {undefined | number} the signal sent by native\n   */\n  removeElement (ref) {\n    if (Array.isArray(ref)) {\n      const actions = ref.map((r) => createAction('removeElement', [r]))\n      return this.addActions(actions)\n    }\n    return this.addActions(createAction('removeElement', [ref]))\n  }\n\n  /**\n   * Send the \"moveElement\" signal.\n   * @param {stirng} target reference id\n   * @param {stirng} parent reference id\n   * @param {number} index\n   * @return {undefined | number} the signal sent by native\n   */\n  moveElement (targetRef, parentRef, index) {\n    return this.addActions(createAction('moveElement', [targetRef, parentRef, index]))\n  }\n\n  /**\n   * Send the \"updateAttrs\" signal.\n   * @param {stirng} reference id\n   * @param {stirng} key\n   * @param {stirng} value\n   * @return {undefined | number} the signal sent by native\n   */\n  setAttr (ref, key, value) {\n    const result = {}\n    result[key] = value\n    return this.addActions(createAction('updateAttrs', [ref, result]))\n  }\n\n  /**\n   * Send the \"updateStyle\" signal, update a sole style.\n   * @param {stirng} reference id\n   * @param {stirng} key\n   * @param {stirng} value\n   * @return {undefined | number} the signal sent by native\n   */\n  setStyle (ref, key, value) {\n    const result = {}\n    result[key] = value\n    return this.addActions(createAction('updateStyle', [ref, result]))\n  }\n\n  /**\n   * Send the \"updateStyle\" signal.\n   * @param {stirng} reference id\n   * @param {object} style\n   * @return {undefined | number} the signal sent by native\n   */\n  setStyles (ref, style) {\n    return this.addActions(createAction('updateStyle', [ref, style]))\n  }\n\n  /**\n   * Send the \"addEvent\" signal.\n   * @param {stirng} reference id\n   * @param {string} event type\n   * @return {undefined | number} the signal sent by native\n   */\n  addEvent (ref, type) {\n    return this.addActions(createAction('addEvent', [ref, type]))\n  }\n\n  /**\n   * Send the \"removeEvent\" signal.\n   * @param {stirng} reference id\n   * @param {string} event type\n   * @return {undefined | number} the signal sent by native\n   */\n  removeEvent (ref, type) {\n    return this.addActions(createAction('removeEvent', [ref, type]))\n  }\n\n  /**\n   * Default handler.\n   * @param {object | array} actions\n   * @param {function} callback\n   * @return {} anything returned by callback function\n   */\n  handler (actions, cb) {\n    return cb && cb()\n  }\n\n  /**\n   * Add actions into updates.\n   * @param {object | array} actions\n   * @return {undefined | number} the signal sent by native\n   */\n  addActions (actions) {\n    const updates = this.updates\n    const handler = this.handler\n\n    if (!Array.isArray(actions)) {\n      actions = [actions]\n    }\n\n    if (this.batched) {\n      updates.push.apply(updates, actions)\n    }\n    else {\n      return handler(actions)\n    }\n  }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * @fileOverview\n * Task handler for communication between javascript and native.\n */\n\nconst handlerMap = {\n  createBody: 'callCreateBody',\n  addElement: 'callAddElement',\n  removeElement: 'callRemoveElement',\n  moveElement: 'callMoveElement',\n  updateAttrs: 'callUpdateAttrs',\n  updateStyle: 'callUpdateStyle',\n  addEvent: 'callAddEvent',\n  removeEvent: 'callRemoveEvent'\n}\n\n/**\n * Create a task handler.\n * @param {string} id\n * @param {function} handler\n * @return {function} taskHandler\n */\nexport function createHandler (id, handler) {\n  const defaultHandler = handler || global.callNative\n\n  /* istanbul ignore if */\n  if (typeof defaultHandler !== 'function') {\n    console.error('[JS Runtime] no default handler')\n  }\n\n  return function taskHandler (tasks) {\n    /* istanbul ignore if */\n    if (!Array.isArray(tasks)) {\n      tasks = [tasks]\n    }\n    for (let i = 0; i < tasks.length; i++) {\n      const returnValue = dispatchTask(id, tasks[i], defaultHandler)\n      if (returnValue === -1) {\n        return returnValue\n      }\n    }\n  }\n}\n\n/**\n * Check if there is a corresponding available handler in the environment.\n * @param {string} module\n * @param {string} method\n * @return {boolean}\n */\nfunction hasAvailableHandler (module, method) {\n  return module === 'dom'\n    && handlerMap[method]\n    && typeof global[handlerMap[method]] === 'function'\n}\n\n/**\n * Dispatch the task to the specified handler.\n * @param {string} id\n * @param {object} task\n * @param {function} defaultHandler\n * @return {number} signal returned from native\n */\nfunction dispatchTask (id, task, defaultHandler) {\n  const { module, method, args } = task\n\n  if (hasAvailableHandler(module, method)) {\n    return global[handlerMap[method]](id, ...args, '-1')\n  }\n\n  return defaultHandler(id, [task], '-1')\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport Comment from './Comment'\nimport Element from './Element'\nimport Listener from '../bridge/Listener'\nimport { checkLevel, debugLog } from '../shared/utils'\nimport { TaskCenter } from '../bridge/TaskCenter'\nimport { createHandler } from '../bridge/Handler'\nimport { addDoc, removeDoc, appendBody, setBody } from './operation'\n\n/**\n * Update all changes for an element.\n * @param {object} element\n * @param {object} changes\n */\nfunction updateElement (el, changes) {\n  const attrs = changes.attrs || {}\n  for (const name in attrs) {\n    el.setAttr(name, attrs[name], true)\n  }\n  const style = changes.style || {}\n  for (const name in style) {\n    el.setStyle(name, style[name], true)\n  }\n}\n\nexport default class Document {\n  constructor (id, url, handler) {\n    id = id ? id.toString() : ''\n    this.id = id\n    this.URL = url\n\n    addDoc(id, this)\n    this.nodeMap = {}\n    const L = Document.Listener || Listener\n    this.listener = new L(id, handler || createHandler(id, Document.handler)) // deprecated\n    this.taskCenter = new TaskCenter(id, handler ? (id, ...args) => handler(...args) : Document.handler)\n    this.createDocumentElement()\n  }\n\n  /**\n  * Get the node from nodeMap.\n  * @param {string} reference id\n  * @return {object} node\n  */\n  getRef (ref) {\n    return this.nodeMap[ref]\n  }\n\n  /**\n  * Turn on batched updates.\n  */\n  open () {\n    this.listener.batched = false\n  }\n\n  /**\n  * Turn off batched updates.\n  */\n  close () {\n    this.listener.batched = true\n  }\n\n  /**\n  * Create the document element.\n  * @return {object} documentElement\n  */\n  createDocumentElement () {\n    if (!this.documentElement) {\n      const el = new Element('document')\n      el.docId = this.id\n      el.ownerDocument = this\n      el.role = 'documentElement'\n      el.depth = 0\n      el.ref = '_documentElement'\n      this.nodeMap._documentElement = el\n      this.documentElement = el\n\n      Object.defineProperty(el, 'appendChild', {\n        configurable: true,\n        enumerable: true,\n        writable: true,\n        value: (node) => {\n          appendBody(this, node)\n        }\n      })\n\n      Object.defineProperty(el, 'insertBefore', {\n        configurable: true,\n        enumerable: true,\n        writable: true,\n        value: (node, before) => {\n          appendBody(this, node, before)\n        }\n      })\n\n      if (checkLevel('debug')) {\n        debugLog(`Create document element (id: \"${el.docId}\", ref: \"${el.ref}\")`)\n      }\n    }\n\n    return this.documentElement\n  }\n\n  /**\n  * Create the body element.\n  * @param {string} type\n  * @param {objct} props\n  * @return {object} body element\n  */\n  createBody (type, props) {\n    if (!this.body) {\n      const el = new Element(type, props)\n      setBody(this, el)\n      if (checkLevel('debug')) {\n        debugLog(`[createBody](${this.id},${el.type},${el.ref}) `\n          + `(${JSON.stringify(el.toJSON(true))}).`)\n      }\n    }\n\n    return this.body\n  }\n\n  /**\n  * Create an element.\n  * @param {string} tagName\n  * @param {objct} props\n  * @return {object} element\n  */\n  createElement (tagName, props) {\n    const el = new Element(tagName, props)\n    if (checkLevel('debug')) {\n      debugLog(`[createElement](${this.id},${el.type},${el.ref}) `\n        + `(${JSON.stringify(el.toJSON(true))}).`)\n    }\n    return el\n  }\n\n  /**\n  * Create an comment.\n  * @param {string} text\n  * @return {object} comment\n  */\n  createComment (text) {\n    return new Comment(text)\n  }\n\n  /**\n  * Fire an event on specified element manually.\n  * @param {object} element\n  * @param {string} event type\n  * @param {object} event object\n  * @param {object} dom changes\n  * @param {object} options\n  * @return {} anything returned by handler function\n  */\n  fireEvent (el, type, event, domChanges, options) {\n    if (!el) {\n      return\n    }\n    event = event || {}\n    event.type = event.type || type\n    event.target = el\n    event.currentTarget = el\n    event.timestamp = Date.now()\n    if (domChanges) {\n      updateElement(el, domChanges)\n    }\n    let isBubble\n    const $root = this.getRef('_root')\n    if ($root && $root.attr) {\n      isBubble = $root.attr['bubble'] === 'true'\n    }\n    return el.fireEvent(type, event, isBubble, options)\n  }\n\n  /**\n  * Destroy current document, and remove itself form docMap.\n  */\n  destroy () {\n    if (checkLevel('debug')) {\n      debugLog(`[destroy](${this.id},document,${this.ref}) `\n        + `Destroy document (id: \"${this.id}\", URL: \"${this.URL}\")`)\n    }\n    this.taskCenter.destroyCallback()\n    delete this.listener\n    delete this.nodeMap\n    delete this.taskCenter\n    removeDoc(this.id)\n  }\n}\n\n// default task handler\nDocument.handler = null\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport Document from '../vdom/Document'\nimport { isRegisteredModule, getModuleDescription } from './module'\nimport { isRegisteredComponent } from './component'\nimport { getTaskCenter } from '../vdom/operation'\n\nfunction setId (weex, id) {\n  Object.defineProperty(weex, '[[CurrentInstanceId]]', { value: id })\n}\n\nfunction getId (weex) {\n  return weex['[[CurrentInstanceId]]']\n}\n\nfunction moduleGetter (id, module, method) {\n  const taskCenter = getTaskCenter(id)\n  if (!taskCenter || typeof taskCenter.send !== 'function') {\n    console.error(`[JS Framework] Failed to find taskCenter (${id}).`)\n    return null\n  }\n  return (...args) => taskCenter.send('module', { module, method }, args)\n}\n\nfunction moduleSetter (id, module, method, fn) {\n  const taskCenter = getTaskCenter(id)\n  if (!taskCenter || typeof taskCenter.send !== 'function') {\n    console.error(`[JS Framework] Failed to find taskCenter (${id}).`)\n    return null\n  }\n  if (typeof fn !== 'function') {\n    console.error(`[JS Framework] ${module}.${method} must be assigned as a function.`)\n    return null\n  }\n  return fn => taskCenter.send('module', { module, method }, [fn])\n}\n\nexport default class WeexInstance {\n  constructor (id, config, data) {\n    setId(this, String(id))\n    this.config = config || {}\n    this._nativeData = data || {}\n    this.document = new Document(id, this.config.bundleUrl)\n    this.requireModule = this.requireModule.bind(this)\n    this.importScript = this.importScript.bind(this)\n    this.isRegisteredModule = isRegisteredModule\n    this.isRegisteredComponent = isRegisteredComponent\n  }\n\n  requireModule (moduleName) {\n    const id = getId(this)\n    if (!(id && this.document && this.document.taskCenter)) {\n      console.error(`[JS Framework] Failed to requireModule(\"${moduleName}\"), `\n        + `instance (${id}) doesn't exist anymore.`)\n      return\n    }\n\n    // warn for unknown module\n    if (!isRegisteredModule(moduleName)) {\n      console.warn(`[JS Framework] using unregistered weex module \"${moduleName}\"`)\n      return\n    }\n\n    // create registered module apis\n    const moduleProxy = {}\n    const moduleDefine = getModuleDescription(moduleName)\n    for (const methodName in moduleDefine) {\n      Object.defineProperty(moduleProxy, methodName, {\n        enumerable: true,\n        configurable: true,\n        get: () => moduleGetter(id, moduleName, methodName),\n        set: fn => moduleSetter(id, moduleName, methodName, fn)\n      })\n    }\n\n    return moduleProxy\n  }\n\n  supports (condition) {\n    if (typeof condition !== 'string') return null\n\n    const res = condition.match(/^@(\\w+)\\/([\\w-]+)(\\.(\\w+))?$/i)\n    if (res) {\n      const type = res[1]\n      const name = res[2]\n      const method = res[4]\n      switch (type) {\n        case 'module': return isRegisteredModule(name, method)\n        case 'component': return isRegisteredComponent(name)\n      }\n    }\n\n    return null\n  }\n\n  importScript (src, options = {}) {\n    const id = getId(this)\n    const taskCenter = getTaskCenter(id)\n    return new Promise(function (resolve, reject) {\n      if (!taskCenter || typeof taskCenter.send !== 'function') {\n        reject(new Error(`[JS Framework] Failed to import script \"${src}\", `\n          + `no taskCenter (${id}) matched.`))\n      }\n      try {\n        taskCenter.send('module', {\n          module: 'script',\n          method: 'importScript'\n        }, [src, options], {\n          callback: [\n            result => resolve(result),\n            error => reject(error)\n          ]\n        })\n      }\n      catch (e) {\n        reject(e)\n      }\n    })\n  }\n\n  // registerStyleSheet (styles) {\n  //   if (this.document) {\n  //     this.document.registerStyleSheet(styles)\n  //   }\n  // }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { init as initTaskHandler } from '../bridge/TaskCenter'\nimport { receiveTasks } from '../bridge/receiver'\nimport { registerModules } from './module'\nimport { registerComponents } from './component'\nimport { services, register, unregister } from './service'\nimport WeexInstance from './WeexInstance'\nimport { getDoc } from '../vdom/operation'\n\nlet frameworks\nlet runtimeConfig\n\nconst versionRegExp = /^\\s*\\/\\/ *(\\{[^}]*\\}) *\\r?\\n/\n\n/**\n * Detect a JS Bundle code and make sure which framework it's based to. Each JS\n * Bundle should make sure that it starts with a line of JSON comment and is\n * more that one line.\n * @param  {string} code\n * @return {object}\n */\nfunction getBundleType (code) {\n  const result = versionRegExp.exec(code)\n  if (result) {\n    try {\n      const info = JSON.parse(result[1])\n      return info.framework\n    }\n    catch (e) {}\n  }\n\n  // default bundle type\n  return 'Weex'\n}\n\n/**\n * Get js framework version at runtime.\n */\nfunction getJSFMVersion () {\n  // It will be converted into a version string at build time\n  return __WEEX_JS_FRAMEWORK_VERSION__ // eslint-disable-line\n}\n\nfunction createServices (id, env, config) {\n  // Init JavaScript services for this instance.\n  const serviceMap = Object.create(null)\n  serviceMap.service = Object.create(null)\n  services.forEach(({ name, options }) => {\n    if (process.env.NODE_ENV === 'development') {\n      console.debug(`[JS Runtime] create service ${name}.`)\n    }\n    const create = options.create\n    if (create) {\n      try {\n        const result = create(id, env, config)\n        Object.assign(serviceMap.service, result)\n        Object.assign(serviceMap, result.instance)\n      }\n      catch (e) {\n        console.error(`[JS Runtime] Failed to create service ${name}.`)\n      }\n    }\n  })\n  delete serviceMap.service.instance\n  Object.freeze(serviceMap.service)\n  return serviceMap\n}\n\nconst instanceTypeMap = {}\nfunction getFrameworkType (id) {\n  return instanceTypeMap[id]\n}\n\nfunction createInstanceContext (id, options = {}, data) {\n  const weex = new WeexInstance(id, options, data)\n\n  const bundleType = options.bundleType || 'Vue'\n  instanceTypeMap[id] = bundleType\n  const framework = runtimeConfig.frameworks[bundleType]\n  if (!framework) {\n    return new Error(`[JS Framework] Invalid bundle type \"${bundleType}\".`)\n  }\n\n  // prepare js service\n  const services = createServices(id, {\n    weex,\n    config: options,\n    created: Date.now(),\n    framework: bundleType,\n    bundleType\n  }, runtimeConfig)\n  Object.freeze(services)\n\n  // prepare runtime context\n  const runtimeContext = Object.create(null)\n  Object.assign(runtimeContext, services, {\n    weex,\n    getJSFMVersion,\n    requireModule: (...args) => weex.requireModule(...args),\n    __WEEX_CALL_JAVASCRIPT__: receiveTasks,\n    services // Temporary compatible with some legacy APIs in Rax\n  })\n  Object.freeze(runtimeContext)\n\n  // prepare instance context\n  const instanceContext = Object.assign({}, runtimeContext)\n  if (typeof framework.createInstanceContext === 'function') {\n    Object.assign(instanceContext, framework.createInstanceContext(id, runtimeContext, data))\n  }\n  Object.freeze(instanceContext)\n  return instanceContext\n}\n\n/**\n * Check which framework a certain JS Bundle code based to. And create instance\n * by this framework.\n * @param {string} id\n * @param {string} code\n * @param {object} config\n * @param {object} data\n */\nfunction createInstance (id, code, config, data) {\n  if (instanceTypeMap[id]) {\n    return new Error(`The instance id \"${id}\" has already been used!`)\n  }\n\n  // Init instance info.\n  const bundleType = getBundleType(code)\n  instanceTypeMap[id] = bundleType\n\n  // Init instance config.\n  config = JSON.parse(JSON.stringify(config || {}))\n  config.env = JSON.parse(JSON.stringify(global.WXEnvironment || {}))\n  config.bundleType = bundleType\n\n  const framework = runtimeConfig.frameworks[bundleType]\n  if (!framework) {\n    return new Error(`[JS Framework] Invalid bundle type \"${bundleType}\".`)\n  }\n  if (bundleType === 'Weex') {\n    console.error(`[JS Framework] COMPATIBILITY WARNING: `\n      + `Weex DSL 1.0 (.we) framework is no longer supported! `\n      + `It will be removed in the next version of WeexSDK, `\n      + `your page would be crash if you still using the \".we\" framework. `\n      + `Please upgrade it to Vue.js or Rax.`)\n  }\n\n  const instanceContext = createInstanceContext(id, config, data)\n  if (typeof framework.createInstance === 'function') {\n    // Temporary compatible with some legacy APIs in Rax,\n    // some Rax page is using the legacy \".we\" framework.\n    if (bundleType === 'Rax' || bundleType === 'Weex') {\n      const raxInstanceContext = Object.assign({\n        config,\n        created: Date.now(),\n        framework: bundleType\n      }, instanceContext)\n      return framework.createInstance(id, code, config, data, raxInstanceContext)\n    }\n    return framework.createInstance(id, code, config, data, instanceContext)\n  }\n  // console.error(`[JS Framework] Can't find available \"createInstance\" method in ${bundleType}!`)\n  runInContext(code, instanceContext)\n}\n\n/**\n * Run js code in a specific context.\n * @param {string} code\n * @param {object} context\n */\nfunction runInContext (code, context) {\n  const keys = []\n  const args = []\n  for (const key in context) {\n    keys.push(key)\n    args.push(context[key])\n  }\n\n  const bundle = `\n    (function (global) {\n      ${code}\n    })(Object.create(this))\n  `\n\n  return (new Function(...keys, bundle))(...args)\n}\n\n/**\n * Get the JSON object of the root element.\n * @param {string} instanceId\n */\nfunction getRoot (instanceId) {\n  const document = getDoc(instanceId)\n  try {\n    if (document && document.body) {\n      return document.body.toJSON()\n    }\n  }\n  catch (e) {\n    console.error(`[JS Framework] Failed to get the virtual dom tree.`)\n    return\n  }\n}\n\nconst methods = {\n  createInstance,\n  createInstanceContext,\n  getRoot,\n  getJSFMVersion,\n  getDocument: getDoc,\n  registerService: register,\n  unregisterService: unregister,\n  callJS (id, tasks) {\n    const framework = frameworks[getFrameworkType(id)]\n    if (framework && typeof framework.receiveTasks === 'function') {\n      return framework.receiveTasks(id, tasks)\n    }\n    return receiveTasks(id, tasks)\n  }\n}\n\n/**\n * Register methods which will be called for each instance.\n * @param {string} methodName\n */\nfunction genInstance (methodName) {\n  methods[methodName] = function (...args) {\n    const id = args[0]\n    const type = getFrameworkType(id)\n    if (type && frameworks[type]) {\n      const result = frameworks[type][methodName](...args)\n      const info = { framework: type }\n\n      // Lifecycle methods\n      if (methodName === 'refreshInstance') {\n        services.forEach(service => {\n          const refresh = service.options.refresh\n          if (refresh) {\n            refresh(id, { info, runtime: runtimeConfig })\n          }\n        })\n      }\n      else if (methodName === 'destroyInstance') {\n        services.forEach(service => {\n          const destroy = service.options.destroy\n          if (destroy) {\n            destroy(id, { info, runtime: runtimeConfig })\n          }\n        })\n        delete instanceTypeMap[id]\n      }\n\n      return result\n    }\n    return new Error(`[JS Framework] Using invalid instance id `\n      + `\"${id}\" when calling ${methodName}.`)\n  }\n}\n\n/**\n * Register methods which init each frameworks.\n * @param {string} methodName\n * @param {function} sharedMethod\n */\nfunction adaptMethod (methodName, sharedMethod) {\n  methods[methodName] = function (...args) {\n    if (typeof sharedMethod === 'function') {\n      sharedMethod(...args)\n    }\n\n    // TODO: deprecated\n    for (const name in runtimeConfig.frameworks) {\n      const framework = runtimeConfig.frameworks[name]\n      if (framework && framework[methodName]) {\n        framework[methodName](...args)\n      }\n    }\n  }\n}\n\nexport default function init (config) {\n  runtimeConfig = config || {}\n  frameworks = runtimeConfig.frameworks || {}\n  initTaskHandler()\n\n  // Init each framework by `init` method and `config` which contains three\n  // virtual-DOM Class: `Document`, `Element` & `Comment`, and a JS bridge method:\n  // `sendTasks(...args)`.\n  for (const name in frameworks) {\n    const framework = frameworks[name]\n    if (typeof framework.init === 'function') {\n      try {\n        framework.init(config)\n      }\n      catch (e) {}\n    }\n  }\n\n  adaptMethod('registerComponents', registerComponents)\n  adaptMethod('registerModules', registerModules)\n  adaptMethod('registerMethods')\n\n  ; ['destroyInstance', 'refreshInstance'].forEach(genInstance)\n\n  return methods\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport Node from './Node'\nimport Element from './Element'\nimport Comment from './Comment'\nimport Document from './Document'\n\nexport {\n  registerElement,\n  unregisterElement,\n  isWeexElement,\n  clearWeexElements\n} from './WeexElement'\n\nexport {\n  Document,\n  Node,\n  Element,\n  Comment\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { Document, Element, Comment } from '../vdom'\nimport Listener from '../bridge/Listener'\nimport { TaskCenter } from '../bridge/TaskCenter'\n\nconst config = {\n  Document, Element, Comment, Listener,\n  TaskCenter,\n  sendTasks (...args) {\n    if (typeof callNative === 'function') {\n      return callNative(...args)\n    }\n    return (global.callNative || (() => {}))(...args)\n  }\n}\n\nDocument.handler = config.sendTasks\n\nexport default config\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport init from './init'\nimport config from './config'\nimport { register, unregister, has } from './service'\n\n/* istanbul ignore next */\nfunction freezePrototype () {\n  // Object.freeze(config.Element)\n  Object.freeze(config.Comment)\n  Object.freeze(config.Listener)\n  Object.freeze(config.Document.prototype)\n  // Object.freeze(config.Element.prototype)\n  Object.freeze(config.Comment.prototype)\n  Object.freeze(config.Listener.prototype)\n}\n\nexport default {\n  service: { register, unregister, has },\n  freezePrototype,\n  init,\n  config\n}\n"],"names":["let","const","Element","super","taskCenter","pureBefore","index","this","init","name","services","initTaskHandler"],"mappings":"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"}