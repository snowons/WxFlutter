!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.WeexJSRuntime=t()}(this,function(){"use strict";function a(e,t,n){return t+"@"+n+"#"+e}function n(e){this.instanceId=String(e),this.lastCallbackId=0,this.callbacks={},this.hooks={}}n.prototype.add=function(e){return this.lastCallbackId++,this.callbacks[this.lastCallbackId]=e,this.lastCallbackId},n.prototype.remove=function(e){var t=this.callbacks[e];return delete this.callbacks[e],t},n.prototype.registerHook=function(e,t,n,r){n=a(e,t,n);this.hooks[n]&&console.warn('[JS Framework] Override an existing component hook "'+n+'".'),this.hooks[n]=r},n.prototype.triggerHook=function(e,t,n,r){var n=a(e,t,n),o=this.hooks[n];if("function"!=typeof o)return console.error("[JS Framework] Invalid hook function type ("+typeof o+') on "'+n+'".'),null;var i=null;try{i=o.apply(null,r||[])}catch(e){throw console.error('[JS Framework] Failed to execute the hook function on "'+n+'".'),e}return i},n.prototype.consume=function(e,t,n){var r=this.callbacks[e];if(void 0!==n&&!1!==n||delete this.callbacks[e],"function"==typeof r)try{return r.call(null,t)}catch(e){throw console.error("[JS Framework] Failed to execute the callback function:\n "+e.toString()),e}return new Error('invalid callback id "'+e+'"')},n.prototype.close=function(){this.callbacks={},this.hooks={}};var e=1;function o(){return(e++).toString()}function l(e){e=Object.prototype.toString.call(e);return e.substring(8,e.length-1)}function i(e){return"[object Object]"===Object.prototype.toString.call(e)}function s(e){if("function"!=typeof btoa)return"";e=Array.prototype.map.call(new Uint8Array(e),function(e){return String.fromCharCode(e)}).join("");return btoa(e)}function c(e){if(!e||"object"!=typeof e)return 1;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return;return 1}var r={};function u(e){var t=global.WXEnvironment&&global.WXEnvironment.logLevel||"log";return r[t]&&r[t][e]}function h(e){global.nativeLog("wxInteractionAnalyzer: [jsfm]"+e,"__DEBUG")}var d={};function f(e){return d[e]}function p(e){e=d[e];return e&&e.taskCenter?e.taskCenter:null}function y(e,t,n){var r,o=e.documentElement;0<o.pureChildren.length||t.parentNode||((n=(r=o.children).indexOf(n))<0?r.push(t):r.splice(n,0,t),1===t.nodeType?("body"===t.role?(t.docId=e.id,t.ownerDocument=e,t.parentNode=o,v(t,o)):(t.children.forEach(function(e){e.parentNode=t}),m(e,t),t.docId=e.id,t.ownerDocument=e,v(t,o),delete e.nodeMap[t.nodeId]),o.pureChildren.push(t),function(e,t){t=t.toJSON();e&&e.taskCenter&&"function"==typeof e.taskCenter.send&&e.taskCenter.send("dom",{action:"createBody"},[t])}(e,t)):(t.parentNode=o,e.nodeMap[t.ref]=t))}function m(e,t){t.role="body",t.depth=1,delete e.nodeMap[t.nodeId],t.ref="_root",e.nodeMap._root=t,e.body=t}function v(t,e){(t.parentNode=e).docId&&(t.docId=e.docId,t.ownerDocument=e.ownerDocument,(t.ownerDocument.nodeMap[t.nodeId]=t).depth=e.depth+1),t.children.forEach(function(e){v(e,t)})}function g(e){for(;e;){if(1===e.nodeType)return e;e=e.nextSibling}}function b(e){for(;e;){if(1===e.nodeType)return e;e=e.previousSibling}}function S(e,t,n,r){n<0&&(n=0);var o=t[n-1],i=t[n];return t.splice(n,0,e),r&&(o&&(o.nextSibling=e),e.previousSibling=o,(e.nextSibling=i)&&(i.previousSibling=e)),n}function k(e,t,n,r){var o=t.indexOf(e);if(o<0)return-1;r&&(s=t[o-1],a=t[o+1],s&&(s.nextSibling=a),a&&(a.previousSibling=s)),t.splice(o,1);var i=n;o<=n&&(i=n-1);var a=t[i-1],s=t[i];return t.splice(i,0,e),r&&(a&&(a.nextSibling=e),e.previousSibling=a,(e.nextSibling=s)&&(s.previousSibling=e)),o===i?-1:n}function E(e,t,n){var r=t.indexOf(e);r<0||(n&&(e=t[r-1],n=t[r+1],e&&(e.nextSibling=n),n&&(n.previousSibling=e)),t.splice(r,1))}function t(){this.nodeId=o(),this.ref=this.nodeId,this.children=[],this.pureChildren=[],this.parentNode=null,this.nextSibling=null,this.previousSibling=null}var I;t.prototype.destroy=function(){var e=f(this.docId);e&&(delete this.docId,delete e.nodeMap[this.nodeId]),this.children.forEach(function(e){e.destroy()})};var w={};var O=["click","longpress","touchstart","touchmove","touchend","panstart","panmove","panend","horizontalpan","verticalpan","swipe"];function C(e,t){f(e).nodeMap[t.nodeId]=t}var A,N=((A=t)&&(F.__proto__=A),((F.prototype=Object.create(A&&A.prototype)).constructor=F).prototype.appendChild=function(e){if(!e.parentNode||e.parentNode===this)if(e.parentNode){if(u("debug")&&h("[appendChild]("+this.docId+","+e.type+","+e.ref+") Move <"+e.type+"> to "+this.children.length+" of <"+this.type+"> ("+this.ref+")."),k(e,this.children,this.children.length,!0),1===e.nodeType){var t=k(e,this.pureChildren,this.pureChildren.length),n=p(this.docId);if(n&&0<=t)return n.send("dom",{action:"moveElement"},[e.ref,this.ref,t])}}else if(u("debug")&&h("[appendChild]("+this.docId+","+e.type+","+e.ref+") Append <"+e.type+"> to <"+this.type+"> ("+this.ref+")."),v(e,this),S(e,this.children,this.children.length,!0),this.docId&&C(this.docId,e),1===e.nodeType){S(e,this.pureChildren,this.pureChildren.length);t=p(this.docId);if(t)return t.send("dom",{action:"addElement"},[this.ref,e.toJSON(),-1])}},F.prototype.insertBefore=function(e,t){if(!(e.parentNode&&e.parentNode!==this||e===t||e.nextSibling&&e.nextSibling===t))if(e.parentNode){if(k(e,this.children,this.children.indexOf(t),!0),1===e.nodeType){var n=g(t),r=k(e,this.pureChildren,n?this.pureChildren.indexOf(n):this.pureChildren.length),n=p(this.docId);if(n&&0<=r)return n.send("dom",{action:"moveElement"},[e.ref,this.ref,r])}}else if(u("debug")&&h("[insertBefore]("+this.docId+","+e.type+","+e.ref+") Insert <"+e.type+"> to <"+this.type+"> ("+this.ref+"), before ("+t.ref+")."),v(e,this),S(e,this.children,this.children.indexOf(t),!0),this.docId&&C(this.docId,e),1===e.nodeType){r=g(t),t=S(e,this.pureChildren,r?this.pureChildren.indexOf(r):this.pureChildren.length),r=p(this.docId);if(r)return r.send("dom",{action:"addElement"},[this.ref,e.toJSON(),t])}},F.prototype.insertAfter=function(e,t){if(!(e.parentNode&&e.parentNode!==this||e===t||e.previousSibling&&e.previousSibling===t))if(e.parentNode){if(k(e,this.children,this.children.indexOf(t)+1,!0),1===e.nodeType){var n=k(e,this.pureChildren,this.pureChildren.indexOf(b(t))+1),r=p(this.docId);if(r&&0<=n)return r.send("dom",{action:"moveElement"},[e.ref,this.ref,n])}}else if(u("debug")&&h("[insertAfter]("+this.docId+","+e.type+","+e.ref+") Insert <"+e.type+"> to <"+this.type+"> ("+this.ref+"), after ("+t.ref+")."),v(e,this),S(e,this.children,this.children.indexOf(t)+1,!0),this.docId&&C(this.docId,e),1===e.nodeType){n=S(e,this.pureChildren,this.pureChildren.indexOf(b(t))+1),t=p(this.docId);if(t)return t.send("dom",{action:"addElement"},[this.ref,e.toJSON(),n])}},F.prototype.removeChild=function(e,t){var n;e.parentNode&&(E(e,this.children,!0),1===e.nodeType&&(u("debug")&&h("[removeChild]("+this.docId+","+e.type+","+e.ref+") Remove <"+e.type+"> from <"+this.type+"> ("+this.ref+")."),E(e,this.pureChildren),(n=p(this.docId))&&n.send("dom",{action:"removeElement"},[e.ref]))),t||e.destroy()},F.prototype.clear=function(){var t=p(this.docId);t&&this.pureChildren.forEach(function(e){t.send("dom",{action:"removeElement"},[e.ref])}),this.children.forEach(function(e){e.destroy()}),this.children.length=0,this.pureChildren.length=0},F.prototype.setAttr=function(e,t,n){var r;this.attr[e]===t&&!1!==n||(this.attr[e]=t,r=p(this.docId),!n&&r&&((n={})[e]=t,r.send("dom",{action:"updateAttrs"},[this.ref,n])))},F.prototype.setAttrs=function(e,t){if(!c(e)){var n,r,o={};for(n in e)this.attr[n]!==e[n]&&(this.attr[n]=e[n],o[n]=e[n]);c(o)||(r=p(this.docId),!t&&r&&r.send("dom",{action:"updateAttrs"},[this.ref,o]))}},F.prototype.setStyle=function(e,t,n){var r;this.style[e]===t&&!1!==n||(this.style[e]=t,r=p(this.docId),!n&&r&&((n={})[e]=t,r.send("dom",{action:"updateStyle"},[this.ref,n])))},F.prototype.setStyles=function(e,t){if(!c(e)){var n,r,o={};for(n in e)this.style[n]!==e[n]&&(this.style[n]=e[n],o[n]=e[n]);c(o)||(r=p(this.docId),!t&&r&&r.send("dom",{action:"updateStyle"},[this.ref,o]))}},F.prototype.setClassStyle=function(e){for(var t in this.classStyle)this.classStyle[t]="";Object.assign(this.classStyle,e);e=p(this.docId);e&&e.send("dom",{action:"updateStyle"},[this.ref,this.toStyle()])},F.prototype.addEvent=function(e,t,n){this.event||(this.event={}),this.event[e]||(u("debug")&&h("[addEvent]("+this.docId+","+this.type+","+this.ref+') Add "'+e+'" event on <'+this.type+"> ("+this.ref+")."),this.event[e]={handler:t,params:n},(n=p(this.docId))&&n.send("dom",{action:"addEvent"},[this.ref,e]))},F.prototype.removeEvent=function(e){var t;this.event&&this.event[e]&&(u("debug")&&h("[removeEvent]("+this.docId+","+this.type+","+this.ref+') Remove "'+e+'" event on <'+this.type+"> ("+this.ref+")."),delete this.event[e],(t=p(this.docId))&&t.send("dom",{action:"removeEvent"},[this.ref,e]))},F.prototype.fireEvent=function(t,e,n,r){var o=null,i=!1,a=this.event[t];if(a&&e){u("debug")&&h("[fireEvent]("+this.docId+","+this.type+","+this.ref+') Fire "'+t+'" event on <'+this.type+"> ("+this.ref+").");var s=a.handler;e.stopPropagation=function(){i=!0};try{o=r&&r.params?s.call.apply(s,[this].concat(r.params,[e])):s.call(this,e)}catch(e){throw console.error('[JS Framework] Failed to invoke the event handler of "'+t+'" on '+this.type+" ("+this.ref+"):\n "+e.toString()),e}}return!i&&n&&-1!==O.indexOf(t)&&this.parentNode&&this.parentNode.fireEvent&&(e.currentTarget=this.parentNode,this.parentNode.fireEvent(t,e,n)),o},F.prototype.toStyle=function(){return Object.assign({},this.classStyle,this.style)},F.prototype.toJSON=function(e){void 0===e&&(e=!1);var t,n={ref:this.ref.toString(),type:this.type,attr:this.attr,style:this.toStyle()},r=[];for(t in this.event){var o=this.event[t].params;o?r.push({type:t,params:o}):r.push(t)}return r.length&&(n.event=r),!e&&this.pureChildren.length&&(n.children=this.pureChildren.map(function(e){return e.toJSON()})),n},F.prototype.toString=function(){return"<"+this.type+" attr="+JSON.stringify(this.attr)+" style="+JSON.stringify(this.toStyle())+">"+this.pureChildren.map(function(e){return e.toString()}).join("")+"</"+this.type+">"},F);function F(e,t,n){void 0===e&&(e="div"),A.call(this);var r=w[e];if(r&&!n)return new r(e,t,!0);t=t||{},this.nodeType=1,this.nodeId=o(),this.ref=this.nodeId,this.type=e,this.attr=t.attr||{},this.style=t.style||{},this.classStyle=t.classStyle||{},this.event={},this.children=[],this.pureChildren=[]}I=N;var J=function(){},x=function(e,t){Object.defineProperty(this,"instanceId",{enumerable:!0,value:String(e)}),Object.defineProperty(this,"callbackManager",{enumerable:!0,value:new n(e)}),J=t||function(){}};function j(e,t){var n=f(e);return n?Array.isArray(t)?t.map(function(e){switch(e.method){case"callback":return function(e,t,n,r){return e.taskCenter.callback(t,n,r)}.apply(void 0,[n].concat(e.args));case"fireEventSync":case"fireEvent":return function(e,t,n,r,o,i){var a=e.getRef(t);return a?e.fireEvent(a,n,r,o,i):r?(r._nodeId=t,e.fireEvent(e.getRef("_documentElement"),n,r,o,i)):void 0}.apply(void 0,[n].concat(e.args));case"componentHook":return function(e,t,n,r,o){if(!e||!e.taskCenter)return console.error('[JS Framework] Can\'t find "document" or "taskCenter".'),null;var i=null;try{i=e.taskCenter.triggerHook(t,n,r,o)}catch(e){throw console.error('[JS Framework] Failed to trigger the "'+n+"@"+r+'" hook on '+t+"."),e}return i}.apply(void 0,[n].concat(e.args))}}):void 0:new Error("[JS Framework] Failed to receiveTasks, instance ("+e+") is not available.")}x.prototype.callback=function(e,t,n){return this.callbackManager.consume(e,t,n)},x.prototype.registerHook=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return(e=this.callbackManager).registerHook.apply(e,t)},x.prototype.triggerHook=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return(e=this.callbackManager).triggerHook.apply(e,t)},x.prototype.updateData=function(e,t,n){this.send("module",{module:"dom",method:"updateComponentData"},[e,t,n])},x.prototype.destroyCallback=function(){return this.callbackManager.close()},x.prototype.normalize=function(e,t){var n=this;void 0===t&&(t=!1);var r=l(e);if(e&&e instanceof N)return e.ref;if(e&&e._isVue&&e.$el instanceof N)return e.$el.ref;if("Function"===r)return this.callbackManager.add(e).toString();if(t){if("Object"===r){var o,i={};for(o in e)i[o]=n.normalize(e[o],!0);return i}if("Array"===r)return e.map(function(e){return n.normalize(e,!0)})}return e&&e.ref&&e["[[VirtualElement]]"]?e.ref:function(e){var t=l(e);switch(t){case"Undefined":case"Null":return"";case"RegExp":return e.toString();case"Date":return e.toISOString();case"Number":case"String":case"Boolean":case"Array":case"Object":return e;case"ArrayBuffer":return{"@type":"binary",dataType:t,base64:s(e)};case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return{"@type":"binary",dataType:t,base64:s(e.buffer)};default:return JSON.stringify(e)}}(e)},x.prototype.send=function(e,t,n,r){var o=this,i=t.action,a=t.component,s=t.ref,c=t.module,d=t.method;switch(n=n.map(function(e){return o.normalize(e)}),"Object"===l(r)&&(r=this.normalize(r,!0)),e){case"dom":return u("debug")&&h("[task]("+this.instanceId+","+this.type+","+i+") "+JSON.stringify(n)),this[i](this.instanceId,n);case"component":return this.componentHandler(this.instanceId,s,d,n,Object.assign({component:a},r));default:return u("debug")&&h("[task]("+this.instanceId+","+c+","+d+") "+JSON.stringify(n)),this.moduleHandler(this.instanceId,c,d,n,r)}},x.prototype.callDOM=function(e,t){return this[e](this.instanceId,t)},x.prototype.callComponent=function(e,t,n,r){return this.componentHandler(this.instanceId,e,t,n,r)},x.prototype.callModule=function(e,t,n,r){return this.moduleHandler(this.instanceId,e,t,n,r)};var M={};function _(r){void 0===r&&(r={});function e(t){var e,n;n=t,i(e=M)&&Object.prototype.hasOwnProperty.call(e,n)||(M[t]={}),Array.isArray(r[t])&&r[t].forEach(function(e){"string"==typeof e?M[t][e]=!0:i(e)&&"string"==typeof e.name&&(M[t][e.name]=e.args||[])})}for(var t in r)e(t)}function T(e,t){return"string"==typeof t?!(!M[e]||!M[e][t]):!!M[e]}var R={};function D(e){return Array.isArray(e)&&e.forEach(function(e){var o,t,n;function r(){n.apply(this,arguments)}e&&("string"==typeof e?R[e]=!0:i(e)&&"string"==typeof e.type&&(R[e.type]=e,o=e.type,e=e.methods,Array.isArray(e)&&e.length&&((n=I)&&(r.__proto__=n),t=(r.prototype=Object.create(n&&n.prototype)).constructor=r,e.forEach(function(r){t.prototype[r]=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=p(this.docId);if(n)return n.send("component",{ref:this.ref,component:o,method:r},e)}}),w[o]=t)))}),"wtf"}function z(e){return!!R[e]}var U=[];function B(e,t){H(e)?console.warn('Service "'+e+'" has been registered already!'):(t=Object.assign({},t),U.push({name:e,options:t}))}function P(n){U.some(function(e,t){if(e.name===n)return U.splice(t,1),!0})}function H(e){return e=e,0<=U.map(function(e){return e.name}).indexOf(e)}var L,W=((L=t)&&(V.__proto__=L),((V.prototype=Object.create(L&&L.prototype)).constructor=V).prototype.toString=function(){return"\x3c!-- "+this.value+" --\x3e"},V);function V(e){L.call(this),this.nodeType=8,this.nodeId=o(),this.ref=this.nodeId,this.type="comment",this.value=e,this.children=[],this.pureChildren=[]}function q(e,t){return void 0===t&&(t=[]),{module:"dom",method:e,args:t}}function X(e,t){this.id=e,this.batched=!1,this.updates=[],"function"==typeof t?Object.defineProperty(this,"handler",{configurable:!0,enumerable:!0,writable:!0,value:t}):console.error("[JS Runtime] invalid parameter, handler must be a function")}X.prototype.createFinish=function(e){return(0,this.handler)([q("createFinish")],e)},X.prototype.updateFinish=function(e){return(0,this.handler)([q("updateFinish")],e)},X.prototype.refreshFinish=function(e){return(0,this.handler)([q("refreshFinish")],e)},X.prototype.createBody=function(e){var t=e.toJSON(),n=t.children;delete t.children;e=[q("createBody",[t])];return n&&e.push.apply(e,n.map(function(e){return q("addElement",[t.ref,e,-1])})),this.addActions(e)},X.prototype.addElement=function(e,t,n){return 0<=n||(n=-1),this.addActions(q("addElement",[t,e.toJSON(),n]))},X.prototype.removeElement=function(e){if(Array.isArray(e)){var t=e.map(function(e){return q("removeElement",[e])});return this.addActions(t)}return this.addActions(q("removeElement",[e]))},X.prototype.moveElement=function(e,t,n){return this.addActions(q("moveElement",[e,t,n]))},X.prototype.setAttr=function(e,t,n){var r={};return r[t]=n,this.addActions(q("updateAttrs",[e,r]))},X.prototype.setStyle=function(e,t,n){var r={};return r[t]=n,this.addActions(q("updateStyle",[e,r]))},X.prototype.setStyles=function(e,t){return this.addActions(q("updateStyle",[e,t]))},X.prototype.addEvent=function(e,t){return this.addActions(q("addEvent",[e,t]))},X.prototype.removeEvent=function(e,t){return this.addActions(q("removeEvent",[e,t]))},X.prototype.handler=function(e,t){return t&&t()},X.prototype.addActions=function(e){var t=this.updates,n=this.handler;if(Array.isArray(e)||(e=[e]),!this.batched)return n(e);t.push.apply(t,e)};var $={createBody:"callCreateBody",addElement:"callAddElement",removeElement:"callRemoveElement",moveElement:"callMoveElement",updateAttrs:"callUpdateAttrs",updateStyle:"callUpdateStyle",addEvent:"callAddEvent",removeEvent:"callRemoveEvent"};function G(r,e){var o=e||global.callNative;return"function"!=typeof o&&console.error("[JS Runtime] no default handler"),function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var n=function(e,t,n){var r=t.module,o=t.method,i=t.args;if(function(e,t){return"dom"===e&&$[t]&&"function"==typeof global[$[t]]}(r,o))return global[$[o]].apply(global,[e].concat(i,["-1"]));return n(e,[t],"-1")}(r,e[t],o);if(-1===n)return n}}}function K(e,t,r){e=e?e.toString():"",this.id=e,this.URL=t,n=this,(t=e)&&(d[t]=n),this.nodeMap={};var n=K.Listener||X;this.listener=new n(e,r||G(e,K.handler)),this.taskCenter=new x(e,r?function(e){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];return r.apply(void 0,t)}:K.handler),this.createDocumentElement()}function Y(e){return e["[[CurrentInstanceId]]"]}K.prototype.getRef=function(e){return this.nodeMap[e]},K.prototype.open=function(){this.listener.batched=!1},K.prototype.close=function(){this.listener.batched=!0},K.prototype.createDocumentElement=function(){var e,n=this;return this.documentElement||((e=new N("document")).docId=this.id,e.ownerDocument=this,e.role="documentElement",e.depth=0,e.ref="_documentElement",this.nodeMap._documentElement=e,this.documentElement=e,Object.defineProperty(e,"appendChild",{configurable:!0,enumerable:!0,writable:!0,value:function(e){y(n,e)}}),Object.defineProperty(e,"insertBefore",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t){y(n,e,t)}}),u("debug")&&h('Create document element (id: "'+e.docId+'", ref: "'+e.ref+'")')),this.documentElement},K.prototype.createBody=function(e,t){return this.body||(m(this,t=new N(e,t)),u("debug")&&h("[createBody]("+this.id+","+t.type+","+t.ref+") ("+JSON.stringify(t.toJSON(!0))+").")),this.body},K.prototype.createElement=function(e,t){t=new N(e,t);return u("debug")&&h("[createElement]("+this.id+","+t.type+","+t.ref+") ("+JSON.stringify(t.toJSON(!0))+")."),t},K.prototype.createComment=function(e){return new W(e)},K.prototype.fireEvent=function(e,t,n,r,o){if(e){var i;(n=n||{}).type=n.type||t,n.target=e,n.currentTarget=e,n.timestamp=Date.now(),r&&function(e,t){var n,r=t.attrs||{};for(n in r)e.setAttr(n,r[n],!0);var o,i=t.style||{};for(o in i)e.setStyle(o,i[o],!0)}(e,r);r=this.getRef("_root");return r&&r.attr&&(i="true"===r.attr.bubble),e.fireEvent(t,n,i,o)}},K.prototype.destroy=function(){var e;u("debug")&&h("[destroy]("+this.id+",document,"+this.ref+') Destroy document (id: "'+this.id+'", URL: "'+this.URL+'")'),this.taskCenter.destroyCallback(),delete this.listener,delete this.nodeMap,delete this.taskCenter,e=this.id,delete d[e]},K.handler=null;var Q,Z,ee=function(e,t,n){var r,o;r=this,o=String(e),Object.defineProperty(r,"[[CurrentInstanceId]]",{value:o}),this.config=t||{},this._nativeData=n||{},this.document=new K(e,this.config.bundleUrl),this.requireModule=this.requireModule.bind(this),this.importScript=this.importScript.bind(this),this.isRegisteredModule=T,this.isRegisteredComponent=z};ee.prototype.requireModule=function(a){var s=Y(this);if(s&&this.document&&this.document.taskCenter){if(T(a)){var e,t={},n=function(i){Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:function(){return n=a,r=i,(o=p(e=s))&&"function"==typeof o.send?function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return o.send("module",{module:n,method:r},e)}:(console.error("[JS Framework] Failed to find taskCenter ("+e+")."),null);var e,n,r,o},set:function(e){return t=a,n=i,r=e,(o=p(e=s))&&"function"==typeof o.send?"function"!=typeof r?(console.error("[JS Framework] "+t+"."+n+" must be assigned as a function."),null):function(e){return o.send("module",{module:t,method:n},[e])}:(console.error("[JS Framework] Failed to find taskCenter ("+e+")."),null);var t,n,r,o}})};for(e in M[a])n(e);return t}console.warn('[JS Framework] using unregistered weex module "'+a+'"')}else console.error('[JS Framework] Failed to requireModule("'+a+'"), instance ('+s+") doesn't exist anymore.")},ee.prototype.supports=function(e){if("string"!=typeof e)return null;var t=e.match(/^@(\w+)\/([\w-]+)(\.(\w+))?$/i);if(t){var e=t[1],n=t[2],r=t[4];switch(e){case"module":return T(n,r);case"component":return z(n)}}return null},ee.prototype.importScript=function(e,r){void 0===r&&(r={});var o=Y(this),i=p(o);return new Promise(function(t,n){i&&"function"==typeof i.send||n(new Error('[JS Framework] Failed to import script "'+e+'", no taskCenter ('+o+") matched."));try{i.send("module",{module:"script",method:"importScript"},[e,r],{callback:[function(e){return t(e)},function(e){return n(e)}]})}catch(e){n(e)}})};var te=/^\s*\/\/ *(\{[^}]*\}) *\r?\n/;function ne(){return"0.29.7"}var re={};function oe(e){return re[e]}function ie(e,t,n){void 0===t&&(t={});var r=new ee(e,t,n),o=t.bundleType||"Vue";re[e]=o;var i=Z.frameworks[o];if(!i)return new Error('[JS Framework] Invalid bundle type "'+o+'".');var a,s,c,d,t=(a=e,s={weex:r,config:t,created:Date.now(),framework:o,bundleType:o},c=Z,(d=Object.create(null)).service=Object.create(null),U.forEach(function(e){var t=e.name,n=e.options.create;if(n)try{var r=n(a,s,c);Object.assign(d.service,r),Object.assign(d,r.instance)}catch(e){console.error("[JS Runtime] Failed to create service "+t+".")}}),delete d.service.instance,Object.freeze(d.service),d);Object.freeze(t);o=Object.create(null);Object.assign(o,t,{weex:r,getJSFMVersion:ne,requireModule:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return r.requireModule.apply(r,e)},__WEEX_CALL_JAVASCRIPT__:j,services:t}),Object.freeze(o);t=Object.assign({},o);return"function"==typeof i.createInstanceContext&&Object.assign(t,i.createInstanceContext(e,o,n)),Object.freeze(t),t}var ae={createInstance:function(e,t,n,r){if(re[e])return new Error('The instance id "'+e+'" has already been used!');var o=function(e){var t=te.exec(e);if(t)try{return JSON.parse(t[1]).framework}catch(e){}return"Weex"}(t);re[e]=o,(n=JSON.parse(JSON.stringify(n||{}))).env=JSON.parse(JSON.stringify(global.WXEnvironment||{})),n.bundleType=o;var i=Z.frameworks[o];if(!i)return new Error('[JS Framework] Invalid bundle type "'+o+'".');"Weex"===o&&console.error('[JS Framework] COMPATIBILITY WARNING: Weex DSL 1.0 (.we) framework is no longer supported! It will be removed in the next version of WeexSDK, your page would be crash if you still using the ".we" framework. Please upgrade it to Vue.js or Rax.');var a=ie(e,n,r);if("function"==typeof i.createInstance){if("Rax"!==o&&"Weex"!==o)return i.createInstance(e,t,n,r,a);o=Object.assign({config:n,created:Date.now(),framework:o},a);return i.createInstance(e,t,n,r,o)}!function(e,t){var n,r=[],o=[];for(n in t)r.push(n),o.push(t[n]);e="\n    (function (global) {\n      "+e+"\n    })(Object.create(this))\n  ";(new(Function.prototype.bind.apply(Function,[null].concat(r,[e])))).apply(void 0,o)}(t,a)},createInstanceContext:ie,getRoot:function(e){var t=f(e);try{if(t&&t.body)return t.body.toJSON()}catch(e){return void console.error("[JS Framework] Failed to get the virtual dom tree.")}},getJSFMVersion:ne,getDocument:f,registerService:B,unregisterService:P,callJS:function(e,t){var n=Q[oe(e)];return n&&"function"==typeof n.receiveTasks?n.receiveTasks(e,t):j(e,t)}};function se(a){ae[a]=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=e[0],r=oe(n);if(r&&Q[r]){var o=(o=Q[r])[a].apply(o,e),i={framework:r};return"refreshInstance"===a?U.forEach(function(e){e=e.options.refresh;e&&e(n,{info:i,runtime:Z})}):"destroyInstance"===a&&(U.forEach(function(e){e=e.options.destroy;e&&e(n,{info:i,runtime:Z})}),delete re[n]),o}return new Error('[JS Framework] Using invalid instance id "'+n+'" when calling '+a+".")}}function ce(o,i){ae[o]=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];for(e in"function"==typeof i&&i.apply(void 0,t),Z.frameworks){var r=Z.frameworks[e];r&&r[o]&&r[o].apply(r,t)}}}var de={Document:K,Element:N,Comment:W,Listener:X,TaskCenter:x,sendTasks:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return("function"==typeof callNative?callNative:global.callNative||function(){}).apply(void 0,e)}};return K.handler=de.sendTasks,{service:{register:B,unregister:P,has:H},freezePrototype:function(){Object.freeze(de.Comment),Object.freeze(de.Listener),Object.freeze(de.Document.prototype),Object.freeze(de.Comment.prototype),Object.freeze(de.Listener.prototype)},init:function(e){for(var t in Q=(Z=e||{}).frameworks||{},function(){var e,t={createFinish:global.callCreateFinish,updateFinish:global.callUpdateFinish,refreshFinish:global.callRefreshFinish,createBody:global.callCreateBody,addElement:global.callAddElement,removeElement:global.callRemoveElement,moveElement:global.callMoveElement,updateAttrs:global.callUpdateAttrs,updateStyle:global.callUpdateStyle,addEvent:global.callAddEvent,removeEvent:global.callRemoveEvent,__updateComponentData:global.__updateComponentData},o=x.prototype;for(e in t)!function(n){var r=t[n];o[n]=r?function(e,t){return r.apply(void 0,[e].concat(t))}:function(e,t){return J(e,[{module:"dom",method:n,args:t}],"-1")}}(e);o.componentHandler=global.callNativeComponent||function(e,t,n,r,o){return J(e,[{component:o.component,ref:t,method:n,args:r}])},o.moduleHandler=global.callNativeModule||function(e,t,n,r){return J(e,[{module:t,method:n,args:r}])}}(),Q){var n=Q[t];if("function"==typeof n.init)try{n.init(e)}catch(e){}}return ce("registerComponents",D),ce("registerModules",_),ce("registerMethods"),["destroyInstance","refreshInstance"].forEach(se),ae},config:de}});
//# sourceMappingURL=index.min.js.map
